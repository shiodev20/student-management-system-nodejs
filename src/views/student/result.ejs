<%- include('../partials/head') %>
<%- include('../partials/navbar') %>

<div class="container-fluid page-body-wrapper">
  
  <%- include('../partials/sidebar') %>
  
    <div class="main-panel">
  
      <div class="content-wrapper">

        <div class="row">

          <div class="col-12 grid-margin">
            <div class="card">
              <div class="card-body">

                <form action="/hoc-sinh/ket-qua-hoc-tap/<%= student.id %>" method="GET">
                  <div class="form-group row">

                    <div class="col-md-4 col-sm-12 mb-2">
                      <label for="info">Mã học sinh</label>
                      <input type="text" id="info" class="form-control form-control-sm" value="<%= student.id %>" readonly>
                    </div>
                    
                    <div class="col-md-4 col-sm-12 mb-2">
                      <label for="info">Họ và tên</label>
                      <input type="text" id="info" class="form-control form-control-sm" value="<%= student.fullName %>" readonly>
                    </div>

                    <div class="col-md-4 col-sm-12 mb-2">
                      <label for="info">Lớp</label>
                      <input type="text" id="info" class="form-control form-control-sm" value="<%= classroom ? classroom.name : null %>" readonly>
                    </div>

                    <div class="col-md-4 col-sm-12 mb-2">
                      <label for="year">Năm học</label>
                      <select class="form-control form-control-sm" id="year" name="year">
                        <% years.forEach(year => { %>

                          <% if(year.id == selectedYear) { %>
                            <option value="<%= year.id %>" selected><%= year.name %></option>
                          <% } else { %>
                            <option value="<%= year.id %>"><%= year.name %></option>
                          <% } %>
      
                        <% }) %>
                      </select>
                    </div>

                    <div class="col-md-4 col-sm-12 mb-2">
                      <label for="semester">Học kỳ</label>
                      <select class="form-control form-control-sm" id="semester" name="semester">
                        <<% semesters.forEach(semester => { %>

                          <% if(semester.id == selectedSemester) { %>
                            <option value="<%= semester.id %>" selected><%= semester.name %></option>
                          <% } else { %>
                            <option value="<%= semester.id %>"><%= semester.name %></option>
                          <% } %>
      
                        <% }) %>
                      </select>
                    </div>

                    <div class="col-md-4 col-sm-12 align-self-end mb-2">
                      <button type="submit" class="btn btn-info">Xem điểm</button>
                    </div>

                  </div>

                </form>

              </div>
            </div>
          </div>

          <div class="col-12 grid-margin">
            <div class="card">
              <div class="card-body">

                <label for="">Lựa chọn:</label>
                <br>
                <a href="/">
                  <button class="btn btn-primary btn-icon-text">
                    <i class="fa-solid fa-file btn-icon-prepend"></i>
                    In bảng điểm
                  </button>
                </a>
                <hr>

                <div class="card-title">Bảng điểm</div>
                <div class="table-responsive">
                  <table class="table table-striped table-bordered">
                    <thead>
                      <tr>
                        <th>STT</th>
                        <th>Môn học</th>
                        <th>Điểm ĐGTX</th>
                        <th>Điểm 15'</th>
                        <th>Điểm 45'</th>
                        <th>Điểm thi</th>
                        <th>Điểm TBM</th>
                      </tr>
                    </thead>
                    
                    <tfoot>
                      <tr>
                        <th>STT</th>
                        <th>Môn học</th>
                        <th>Điểm ĐGTX</th>
                        <th>Điểm 15'</th>
                        <th>Điểm 45'</th>
                        <th>Điểm thi</th>
                        <th>Điểm TBM</th>
                      </tr>
                      </tr>
                    </tfoot>
        
                    <tbody>
                      <% studentResult.forEach((subject, idx) => { %>
                        <tr>
                          <th><%= idx + 1 %></th>
                          <td style="width: 200px;"><%= subject.name %></td>
                          <% subject.marks.forEach(mark => { %>
                            <td><input class="input" type="text" value="<%= mark.mark %>" readonly></td>
                          <% }) %>
                        </tr>
                      <%})%>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

        </div>


  <section class="section">
    <div class="l-container">
  
      <form action='/hoc-sinh/ket-qua-hoc-tap/HS1' method="GET">
        <div class="is-flex is-flex-wrap-wrap">
          
          <div class="flex-item m-3">
            <div class="field sm-input">
              <label class="label">Mã học sinh</label>
              <div class="control">
                <input class="input" type="text" value="<%= student.id %>" readonly>
              </div>
            </div>
          </div>
  
          <div class="flex-item m-3">
            <div class="field sm-input">
              <label class="label">Họ tên</label>
              <div class="control">
                <input class="input" type="text" value="<%= student.fullName %>" readonly>
              </div>
            </div>
          </div>
    
          <div class="flex-item m-3">
            <div class="field sm-input">
              <label class="label">Lớp</label>
              <div class="control">
                <input style="width: 100px;" class="input" type="text" value="<%= classroom ? classroom.name : null %>" readonly>
              </div>
            </div>
          </div>
          
          <div class="flex-item m-3">
            <div class="field sm-input">
              <label class="label">Năm học</label>
              <div class="select">
                <select name="year">
                  <% years.forEach(year => { %>

                    <% if(year.id == selectedYear) { %>
                      <option value="<%= year.id %>" selected><%= year.name %></option>
                    <% } else { %>
                      <option value="<%= year.id %>"><%= year.name %></option>
                    <% } %>

                  <% }) %>
                </select>
              </div>
            </div>
          </div>
    
          <div class="flex-item m-3">
            <div class="field sm-input">
              <label class="label">Học kỳ</label>
              <div class="select">
                <select name="semester">
                  <% semesters.forEach(semester => { %>

                    <% if(semester.id == selectedSemester) { %>
                      <option value="<%= semester.id %>" selected><%= semester.name %></option>
                    <% } else { %>
                      <option value="<%= semester.id %>"><%= semester.name %></option>
                    <% } %>

                  <% }) %>
                </select>
              </div>
            </div>
          </div>
  
          <div class="flex-item m-3 is-align-self-flex-end">
            <button class="button is-info">Xem điểm</button>
          </div>
    
        </div>
      </form>
  
      <hr>
      <p>Lựa chọn:</p>

      <div class="is-flex is-flex-wrap-wrap">

        <div class="flex-item my-3 mr-3">
          <a href="" class="button is-info">In bảng điểm</a>
        </div>

        
      </div>
    </div>
  </section>
  
  <section>
    <div class="l-container">
      <div class="table-container mb-6">
        <table class="table is-fullwidth is-hoverable is-bordered">
          <thead>
            <tr>
              <th>STT</th>
              <th>Môn học</th>
              <th>Điểm ĐGTX</th>
              <th>Điểm 15'</th>
              <th>Điểm 45'</th>
              <th>Điểm thi</th>
              <th>Điểm TBM</th>
            </tr>
          </thead>
          
          <% if(studentResult.length > 0) { %>
            <tbody>
              <% studentResult.forEach((subject, idx) => { %>
                <tr>
                  <th><%= idx + 1 %></th>
                  <td style="width: 200px;"><%= subject.name %></td>
                  <% subject.marks.forEach(mark => { %>
                    <td><input class="input" type="text" value="<%= mark.mark %>" readonly></td>
                  <% }) %>
                </tr>
              <%})%>
            </tbody>
          <% } %>
        </table>
      </div>
    
    </div>
  </section>


<%- include('../partials/footer') %>
<%- include('../partials/library') %>